<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Resilience Patterns</title>

		<link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css">
		<link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css">
		<link rel="stylesheet" href="node_modules/reveal.js/dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="node_modules/reveal.js/plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<section data-background-image="./assets/resilience.jpg">
					<h2 style="margin: 150px 0 300px 0;">Designing Resilient Software</h2>
					<p style="font-size: 20px;">Created by <br/> Olga Diaz & Andreas Landerer <br/> Feb 2021</p>
				</section>

                <section data-background-image="./assets/debate.gif">
					<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">We invite you to <br/> join the discussion</h2>
				</section>

				<!-----------------------------------------------------------------------------------------------------
				-- Case Study: Trampled by Your Own Customers
				------------------------------------------------------------------------------------------------------->
				<section data-background-color="#637074">
					<section data-background-image="./assets/trampled-by-customers.jpg">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">Case Study: <br/> Murder by the Masses</h2>
					</section>

					<section>
						<h2 style="margin: 0;">The Challenge</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Murder by the Masses</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/website-redesign.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">E-Commerce Website Redesign</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/developers.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">>300 Engineers</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/time.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">3 Years</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/weight-lifting.webp" style="border-radius: 10px; height: 130px;">
								</div>
								<p style="font-size: 24px;">3 Months Load Testing</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/launch.jpg" style="border-radius: 10px;">
								</div>
								<p style="font-size: 24px;">6 Official Launch Dates</p>
							</div>
						</div>
					</section>

					<section>
						<h2 style="margin: 0;">The Tech Stack</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Murder by the Masses</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 350px;" class="fragment fade-up">
								<div style="height: 250px;">
									<img src="assets/microservices.jpg" style="border-radius: 10px; height: 200px;">
								</div>
								<p>Several Backends</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 350px;" class="fragment fade-up">
								<div style="height: 250px;">
									<img src="assets/servers.png" style="border-radius: 10px;">
								</div>
								<p>Server Side Rendering</p>
							</div>
						</div>
					</section>

					<section>
						<h2 style="margin: 0;">Launch Day</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Murder by the Masses</h2>
						<ul style="font-size: 32px;">
							<li class="fragment fade-up">9:00 &nbsp; &rarr; &nbsp; Redirects are applied</li>
							<li class="fragment fade-up">9:05 &nbsp; &rarr; &nbsp; >10,000 active sessions</li>
							<li class="fragment fade-up">9:10 &nbsp; &rarr; &nbsp; >50,000 active sessions</li>
							<li class="fragment fade-up">9:30 &nbsp; &rarr; &nbsp; 250,000 active sessions</li>
						</ul>
						<div class="fragment fade-up">
							<img src="assets/bomb.jpg" style="height: 300px;">
							<p style="position: relative; top: -110px;">... & the site crashed</p>
						</div>
					</section>

					<section>
						<h2 style="margin: 0;">The Autopsy</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Murder by the Masses</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">The large number of sessions killed the site.</li>
							<li class="fragment fade-up" data-fragment-index="2"><span>Did marketing advertise the launch?</span><span data-fragment-index="3" class="fragment fade-up">... No</span></li>
							<li class="fragment fade-up" data-fragment-index="4">Website URL paths were re-structured.</li>
							<li class="fragment fade-up" data-fragment-index="5">Search engines, scrapers & shopbots noticed the change, started re-caching.</li>
							<li class="fragment fade-up" data-fragment-index="6">None of these used session cookies.</li>
							<li class="fragment fade-up" data-fragment-index="7">Session replication was enabled.</li>
							<li class="fragment fade-up" data-fragment-index="8">Each session was storing large amounts of data (search results, etc.).</li>
							<li class="fragment fade-up" data-fragment-index="9">Server-side-rendering meant effort from the backend for a page that never changed (1000+ DB requests).</li>
						</ul>
						<img class="fragment fade-up" data-fragment-index="1" src="assets/terminator.png" style="height: 150px;">
						<img class="fragment fade-up" data-fragment-index="1" src="assets/cookies.png" style="height: 150px;">
						<aside class="notes">
							<ol>
								<li>Since URLs changed, search engines started to refetch their cache</li>
								<li>Scrapers and shopbots: these commercial scrapers actually sell a subscription service. A retailer wanting to track competitors prices can subscribe to a report.</li>
								<li>Since they didnt use cookies, each request would create a new session</li>
								<li>Sessions were consuming RAM, CPU and network bandwidth</li>
							</ol>
						</aside>
					</section>

					<section>
						<h2 style="margin: 0;">The Autopsy</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Murder by the Masses</h2>
						<div style="display: flex; justify-content: space-evenly;">
							<div style="min-width: 300px;" class="fragment">
								<img src="assets/low-memory.png" style="height: 200px;">
								<p>#Sessions</p>
							</div>
							<p style="align-self: center;" class="fragment">+</p>
							<div style="margin: 0 30px;" class="fragment">
								<img src="assets/bandwidth.jpg" style="height: 200px; border-radius: 10px;">
								<p>Bandwidth</p>
							</div>
							<p style="align-self: center;" class="fragment">=</p>
							<div class="fragment">
								<img src="assets/blocked-toilet.png" style="height: 200px;">
								<p>Blocked Request Threads</p>
							</div>
						</div>
					</section>

					<section>
						<h2 style="margin: 0;">How did we get here?</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Murder by the Masses</h2>
						<div style="display: flex; justify-content: space-evenly; font-size: 21px;">
							<div class="fragment fade-up">
								<img src="assets/built-for-acpt.jpg" style="height: 300px;">
								<ul>
									<li>Built for ACPT</li>
									<li class="fragment fade-up">ACPT vs PROD topology mismatch</li>
								</ul>
							</div>
							<p style="align-self: center; font-size: 36px;" class="fragment fade-up">+</p>
							<div class="fragment fade-up" style="width: 700px;">
								<img src="assets/load-testing.jpg" style="height: 300px;">
								<ul style="padding-left: 30px;">
									<li>Unrealistic load testing</li>
									<li class="fragment fade-up">Marketing required 25,000 concurrent users</li>
									<li class="fragment fade-up">Concurrent users != active sessions</li>
									<li class="fragment fade-up">The issue was encountered during testing, but considered unrealistic</li>
									<li class="fragment fade-up">Testing gap: polite users only</li>
								</ul>
							</div>
						</div>
					</section>

					<section>
						<h2 style="margin: 0;">Anti-patterns</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Murder by the Masses</h2>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<img src="assets/crack.jpg" style="height: 100px;">
							<h5 style="width: 250px;">Cascading <br/> Failures</h5>
							<p style="font-size: 18px; width: 350px;">a crack that jumps from one system to another</p>
						</div>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<img src="assets/users.png" style="height: 100px;">
							<h5 style="width: 250px;">Users</h5>
							<p style="font-size: 18px; width: 350px;">unwanted/malicious users, session memory, traffic</p>
						</div>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<div style="width: 150px;">
								<img src="assets/blocked-toilet.png" style="height: 100px;">
							</div>
							<h5 style="width: 250px;">Blocked <br/> Threads</h5>
							<p style="font-size: 18px; width: 350px;">these can happen any time you check resources out of a connection pool (i.e. DB), deal with caches or objects registries</p>
						</div>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<img src="assets/dogpile.png" style="height: 100px; margin-left: 20px;">
							<h5 style="width: 250px;">Dogpile</h5>
							<p style="font-size: 18px; width: 350px;">highly concentrated demand</p>
						</div>
					</section>
				</section>

				<!-----------------------------------------------------------------------------------------------------
				-- Case Study: Holiday Traffic Jam
				------------------------------------------------------------------------------------------------------->
				<section data-background-color="#aab9cf">
					<section data-background-image="./assets/traffic.jpg">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px; color: white">Case Study: <br/> Holiday Traffic Jam</h2>
					</section>

					<!-- The Challenge -->
					<section>
						<h2 style="margin: 0;">The Challenge</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/online-store.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Launch of new online store</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/sun.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Launch in summer</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/time-illusion.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Still time before holiday season</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/developers.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Small team of highly-skilled Engineers</p>
							</div>
						</div>
					</section>

					<!-- Cautious Optimism -->
					<section>
						<h2 style="margin: 0;">Cautious optimism</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 350px;" class="fragment fade-up">
								<div style="height: 250px;">
									<img src="assets/servers-farm.png" style="border-radius: 10px; height: 200px;">
								</div>
								<p>Doubled the number of servers</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 350px;" class="fragment fade-up">
								<div style="height: 250px;">
									<img src="assets/monitoring.jpg" style="border-radius: 10px;">
								</div>
								<p>Data showing site was stable</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 350px;" class="fragment fade-up">
								<div style="height: 250px;">
									<img src="assets/tools.jpg" style="border-radius: 10px;">
								</div>
								<p>Tools to control the system</p>
							</div>
						</div>
					</section>

					<!-- Thanksgiving Day -->
					<section>
						<h2 style="margin: 0;">Thanksgiving Day</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/thanksgiving.png" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Spending Thanksgiving at your parents'</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/orders.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">As many orders as in an entire month</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/performance.png" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Overall performance stressed but stable</p>
							</div>
							<p style="align-self: center;" class="fragment fade-up">+</p>
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/passed.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Passed first killer load test</p>
							</div>
						</div>
					</section>

					<!-- Black Friday I -->
					<section>
						<h2 style="margin: 0;">Black friday</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 200px;" class="fragment fade-up">
								<div style="height: 150px;">
									<img src="assets/orders-more.jpg" style="border-radius: 10px; height: 128px;">
								</div>
								<p style="font-size: 24px;">Orders trending even more than on Thanksgiving</p>
							</div>
						</div>
					</section>

					<!-- Black Friday II -->
					<section>
						<h2 style="margin: 0;">Black friday</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 800px;">
								<div style="height: 500px;">
									<img src="assets/system-failure.png" style="border-radius: 10px">
								</div>
							</div>
						</div>
					</section>

					<!-- Investigation -->
					<section>
						<h2 style="margin: 0;">Investigation</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">Session counts were very high, higher than the day before</li>
							<li class="fragment fade-up" data-fragment-index="2">Network bandwidth usage was high but not hitting a limit</li>
							<li class="fragment fade-up" data-fragment-index="3">Search servers, our usual culprit, were responding well. System stats looked healthy</li>
							<li class="fragment fade-up" data-fragment-index="4"><span>Web, application, and database CPU usage were low</span><span span data-fragment-index="5" class="fragment fade-up"> - really low</span></li>
							<li class="fragment fade-up" data-fragment-index="6">Request-handling threads were almost all busy</li>
							<li class="fragment fade-up" data-fragment-index="7"><span>Application server page latency (response time) was high</span><span span data-fragment-index="8" class="fragment fade-up"> - it was effectively infinite</span></li>
						</ul>
					</section>

					<!-- The smoking gun -->
					<section>
						<h2 style="margin: 0;">The smoking gun</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">Thread dumps on the frontend servers showed that 3'000 threads were tied up doing nothing ...</li>
							<li class="fragment fade-up" data-fragment-index="2">... they were all blocked on a resource pool, one that had no timeout</li>
							<li class="fragment fade-up" data-fragment-index="3">Attention swung to the backend, where 450 threads were occupied making calls to an external integration point ...</li>
							<li class="fragment fade-up" data-fragment-index="4">... one that, once again, had no timeout</li>
							<li class="fragment fade-up" data-fragment-index="5">A maintenance window left the external integration point with a capacity of serving 25 threads concurrently ...</li>
							<li class="fragment fade-up" data-fragment-index="6">... and the maintenance windows would last until Monday</li>
						</ul>
					</section>

					<!-- The quick fix -->
					<section>
						<h2 style="margin: 0;">The quick fix</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">One of your tools allowed you to modify your resource pools on the fly</li>
							<li class="fragment fade-up" data-fragment-index="2">You set both <b>max</b> and <b>checkoutBlockTime</b> for that resource pool to <b>0</b></li>
							<li class="fragment fade-up" data-fragment-index="3">Employing a fail fast strategy</li>
						</ul>
					</section>

					<!-- Anti Patterns -->
					<section>
						<h2 style="margin: 0;">Anti-patterns</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Case Study: Holiday Traffic Jam</h2>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<div style="width: 150px;">
								<img src="assets/blocked-toilet.png" style="height: 100px;">
							</div>
							<h5 style="width: 250px;">Blocked <br/> Threads</h5>
							<p style="font-size: 18px; width: 350px;">these can happen any time you check resources out of a connection pool (i.e. DB), deal with caches or objects registries</p>
						</div>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<img src="assets/integration.png" style="height: 100px;">
							<h5 style="width: 250px;">Integration <br/> Points</h5>
							<p style="font-size: 18px; width: 350px;">Integration points are the number-one killer of systems. Every single one of them presents a stability risk</p>
						</div>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<img src="assets/unbalance.jpg" style="height: 100px;">
							<h5 style="width: 250px;">Unbalanced <br/> Capacities</h5>
							<p style="font-size: 18px; width: 350px;">watch out for mismatched ratios between systems and layers- always think in terms of end-to-end scalability</p>
						</div>
						<div style="display: flex; align-items: center; justify-content: space-evenly;" class="fragment">
							<img src="assets/scalability.png" style="height: 100px;">
							<h5 style="width: 250px;">Scaling <br/> Effects</h5>
							<p style="font-size: 18px; width: 350px;">always examine how your system behaves when you're scaling out</p>
						</div>

					</section>
				</section>
				</section>

				<!-----------------------------------------------------------------------------------------------------
				-- Stability Patterns
				------------------------------------------------------------------------------------------------------->
				<section data-background-color="#212227">

					<!-- Stability Patterns -->
					<section data-background-image="./assets/stability.jpg">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">Stability<br/>Patterns</h2>
					</section>

					<!-- Bulkhead -->
					<section data-background-image="./assets/sinking-ship.jpg">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">Bulkhead</h2>
					</section>

					<section>
						<h2 style="margin: 0;">Bulkhead</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<p>Compartmentalise to avoid sinking whole ship</p>
						<img src="assets/bulkheads-ship.jpeg">
					</section>

					<section>
						<h2 style="margin: 0;">Bulkhead Example</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<div style="display: flex; justify-content: center; height: 540px;">
							<img src="assets/bulkhead-start.png" class="fragment fade-out" data-fragment-index="1" style="position: absolute; height: 500px;">
							<img src="assets/bulkhead-1-request.png" class="fragment fade-in-then-out" data-fragment-index="1" style="position: absolute; height: 500px;">
							<img src="assets/bulkhead-multi-request.png" class="fragment fade-in-then-out" data-fragment-index="2" style="position: absolute; height: 500px;">
							<img src="assets/bulkhead-slow-start.png" class="fragment fade-in-then-out" data-fragment-index="3" style="position: absolute; height: 500px;">
							<img src="assets/bulkhead-blocked-requests.png" class="fragment fade-in-then-out" data-fragment-index="4" style="position: absolute; height: 500px;">
							<img src="assets/bulkhead-end.png" class="fragment fade-in-then-out" data-fragment-index="5" style="position: absolute; height: 500px;">
						</div>
						<div style="display: flex; justify-content: center;">
							<p class="fragment fade-out" data-fragment-index="1" style="margin: 0; font-size: 18px; position: absolute;">
								Thread Pool
							</p>
							<p class="fragment fade-in-then-out" data-fragment-index="5" style="margin: 0; font-size: 18px; position: absolute;">
								Do not allow more than X requests per bulkhead.
							</p>
						</div>
					</section>

					<!-- Circuit Breaker -->
					<section data-background-image="./assets/circuit-breaker.jpg">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">Circuit<br/>Breaker</h2>
					</section>

					<section>
						<h2 style="margin: 0;">Circuit Breaker</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">Wrap dangerous operations with a component to circumvent calls when the system is not healthy</li>
							<li class="fragment fade-up" data-fragment-index="2">Prevent operations rather than re-execute them</li>
							<li class="fragment fade-up" data-fragment-index="3">Means to automatically degrade functionality when the system is under stress</li>
						</ul>
					</section>

					<section>
						<h2 style="margin: 0;">Circuit Breaker</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 800px;">
								<div style="height: 500px;">
									<img src="assets/circuit-breaker-pattern.png" style="border-radius: 10px; background-color: white">
								</div>
							</div>
						</div>
					</section>

					<section>
						<h2 style="margin: 0;">Circuit Breaker</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 800px;">
								<div style="height: 500px;">
									<img src="assets/circuit-breaker-dashboard.png" style="border-radius: 10px; background-color: white">
								</div>
							</div>
						</div>
					</section>

					<!-- Fail Fast -->
					<section data-background-image="./assets/fail-fast.jpg">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">Fail<br/>Fast</h2>
					</section>

					<section>
						<h2 class="fragment fade-up" data-fragment-index="1">Do not try to avoid failures.</h2>
						<h2 class="fragment fade-up" data-fragment-index="2">Embrace them.</h2>
					</section>

					<section>
						<h2 style="margin: 0;">Fail Fast</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">If you know you’re going to fail, you better fail fast</li>
							<li class="fragment fade-up" data-fragment-index="2">Avoid foreseeable failures</li>
							<li class="fragment fade-up" data-fragment-index="3">Don't do useless work</li>
							<li class="fragment fade-up" data-fragment-index="4">That way the caller doesn't have to tie up any of its capacity</li>
						</ul>
					</section>

					<section>
						<h2 style="margin: 0;">Fail Fast</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">Check the state of your circuit breakers</li>
							<li class="fragment fade-up" data-fragment-index="2">Reserve the resources needed for an operation before it begins</li>
							<li class="fragment fade-up" data-fragment-index="3">Even before that, do basic user input validation</li>
							<li class="fragment fade-up" data-fragment-index="4">Report a failure ... <span class="fragment fade-up" data-fragment-index="5">or fail silently</span></li>
						</ul>
					</section>

					<!-- Back pressure -->
					<section data-background-image="./assets/queue.png" data-background-color="#ffffe7">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px; color: white;">Back<br/>Pressure</h2>
					</section>

					<section>
						<h2 style="margin: 0;">Back Pressure</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<p style="margin-top: 50px;">It describes the build-up of data, when the incoming task rate is higher than the system’s ability to process them – resulting in a buffer of unhandled data.</p>
					</section>

					<section>
						<h2 style="margin: 0;">Back Pressure</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-in-then-semi-out" data-fragment-index="1">Every performance problem starts with a queue backing up somewhere</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="2">If a queue is unbounded, it can consume all available memory</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="3">As queue grows, response time reaches infinity</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="4">We do not want unbounded queues!</li>
						</ul>
						<img class="fragment" src="assets/infinite-queue.jpg" style="border-radius: 10px; height: 300px;" data-fragment-index="3">
					</section>

					<section>
						<h2 style="margin: 0;">Back Pressure</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<p>What to do if bounded queue is full?</p>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-in-then-semi-out" data-fragment-index="1">Pretend to accept the new item but actually drop it on the floor</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="2">Actually accept the new item and drop something else from the queue on the floor</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="3">Refuse the item</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="4">Block the producer until there is room in the queue</li>
						</ul>
						<img src="assets/talk-to-the-hand.gif" class="fragment" style="height: 300px;" data-fragment-index="4">
					</section>

					<section>
						<h2 style="margin: 0;">Back Pressure Example</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<h5 class="fragment" data-fragment-index="1">TCP uses "sliding window"</h5>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment" data-fragment-index="2"><strong>Receiver:</strong> data acknowledgement includes how much receive space remains</li>
							<li class="fragment" data-fragment-index="3"><strong>Sender:</strong> only sends as much data as receiver can accept, sender is responsible for buffering</li>
						</ul>
						<img src="assets/tcp-sliding-window.png" class="fragment" data-fragment-index="1" style="height: 350px; margin: 0;"/>
					</section>

					<section>
						<h2 style="margin: 0;">Back Pressure</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-in-then-semi-out" data-fragment-index="1">Works best with async calls and programming</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="2">Great in reactive streams</li>
							<li class="fragment" data-fragment-index="3">Akka streams example:</li>
						</ul>
						<div style="display: flex; justify-content: center;">
							<img src="assets/backpressure-overflow.png" style="position: absolute;" class="fragment fade-in-then-out" data-fragment-index="3">
							<img src="assets/backpressure-pull-based.png" style="position: absolute;" class="fragment" data-fragment-index="4">
						</div>
					</section>

					<!-- Test harness -->
					<section data-background-image="./assets/test-harness.webp">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">Test<br/>Harness</h2>
					</section>

					<section>
						<h2 style="margin: 0;">Test Harness</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-in-then-semi-out" data-fragment-index="1">Distributed systems have failure modes that are difficult to provoke on dev environments</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="2">Integration tests tend to cover what is expected of the system</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="3">All systems will eventually run into the unexpected</li>
							<li class="fragment fade-in-then-semi-out" data-fragment-index="4">Do we know the max load of our system?</li>
						</ul>
                        <img src="assets/acrobats.jpg" style="height: 300px;" class="fragment" data-fragment-index="1">
					</section>

					<section>
						<h2 style="margin: 0;">Test Harness</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<ul style="font-size: 32px; margin-top: 10px;">
							<li class="fragment fade-in-then-semi-out">Emulate remote systems</li>
							<li class="fragment fade-in-then-semi-out">Be devious, nasty and vicious in your tests</li>
							<li class="fragment fade-in-then-semi-out">Its job is to make the system under test cynical</li>
							<li class="fragment fade-in-then-semi-out">Introduce latency, drop packets, high load, etc.</li>
						</ul>
						<img src="assets/devil.png" style="margin: 0;">
					</section>

					<section data-auto-animate>
						<h2 style="margin: 0;">Test Harness Example</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<img src="assets/simbian-army.png" style="border-radius: 10px; height: 400px; margin: 0;" data-id="chaos-img">
						<p style="margin: 0">Chaos Engineering:</p>
						<p style="margin: 0;">Breaking things on purpose</p>
					</section>

					<section data-auto-animate>
						<h2 style="margin: 0;">Test Harness Example</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<p style="margin-bottom: 0">Chaos Engineering</p>
						<ul style="font-size: 32px; margin-top: 10px;">
							<li class="fragment fade-in-then-semi-out">Introduce chaos in production</li>
							<li class="fragment fade-in-then-semi-out">Abruptly reduce the workforce</li>
							<li class="fragment fade-in-then-semi-out">Building resilient systems requires experience with failure</li>
						</ul>
						<img src="assets/simbian-army.png" style="border-radius: 10px; height: 250px;" data-id="chaos-img">
					</section>

					<!-- Decoupling Middleware -->
					<section data-background-image="./assets/train_coupling.jpg">
						<h2 style="background-color: black; opacity: 0.8; border-radius: 10px;">Decoupling<br/>Middleware</h2>
					</section>

					<section>
						<h2 class="fragment" data-fragment-index="1">Too often we characterize our business challenges as synchronous in nature</h2>
					</section>

					<section>
						<h2 style="margin: 0;">Decoupling Middleware</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 800px;">
								<div style="height: 250px;">
									<img src="assets/request-response.png" style="border-radius: 10px; background-color: white">
								</div>
							</div>
						</div>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">Sender and receiver need to know each other</li>
							<li class="fragment fade-up" data-fragment-index="2">They both need to be available at the same time</li>
							<li class="fragment fade-up" data-fragment-index="3">They must be able to scale proportionally</li>
							<li class="fragment fade-up" data-fragment-index="4">Every team must be concerned with scalability and availability</li>
						</ul>
					</section>

					<section>
						<h2 style="margin: 0;">Decoupling Middleware</h2>
						<h2 style="margin-top: 0; font-size: 24px;">Stability patterns</h2>
						<div style="display: flex; justify-content: space-evenly; align-items: flex-start;">
							<div style="width: 800px;">
								<div style="height: 300px;">
									<img src="assets/topic.png" style="border-radius: 10px; background-color: white">
								</div>
							</div>
						</div>
						<ul style="font-size: 28px; margin-top: 10px;">
							<li class="fragment fade-up" data-fragment-index="1">Only middleware needs to be optimized for scalability and availability</li>
							<li class="fragment fade-up" data-fragment-index="2">Producer and consumer don't know about each other</li>
							<li class="fragment fade-up" data-fragment-index="3">This makes up for an easily extendable architecture</li>
							<li class="fragment fade-up" data-fragment-index="4">Producer and consumer can process messages at different times</li>
							<li class="fragment fade-up" data-fragment-index="5">Consumers can process messages at their own pace</li>
						</ul>
					</section>
				</section>

				<!-----------------------------------------------------------------------------------------------------
				-- All Patterns
				------------------------------------------------------------------------------------------------------->
				<section>
					<h2>Stability Patterns</h2>
					<div style="display: flex; font-size: 32px;">
						<div>
							<div style="display: flex; justify-content: space-evenly; height: 200px; width: 500px;">
								<img src="assets/bulkheads-ship.jpeg" style="width: 200px; border-radius: 10px;">
								<p>Bulkhead</p>
							</div>
							<div style="display: flex; justify-content: space-evenly; height: 200px; width: 500px;">
								<img src="assets/circuit-breaker-pattern.png" style="width: 200px; background-color: white; border-radius: 10px;">
								<p>Circuit <br/> Breaker</p>
							</div>
							<div style="display: flex; justify-content: space-evenly; height: 200px; width: 500px;">
								<img src="assets/fail-fast.jpg" style="width: 200px; background-color: white; border-radius: 10px;">
								<p>Fail Fast</p>
							</div>
						</div>
						<div>
							<div style="display: flex; justify-content: space-evenly; height: 200px; width: 500px;">
								<img src="assets/backpressure-pull-based.png" style="width: 200px; background-color: white; border-radius: 10px;">
								<p>Back Pressure</p>
							</div>
							<div style="display: flex; justify-content: space-evenly; height: 200px; width: 500px;">
								<img src="assets/simbian-army.png" style="width: 200px; background-color: white; border-radius: 10px;">
								<p>Test Harness</p>
							</div>
							<div style="display: flex; justify-content: space-evenly; height: 200px; width: 500px;">
								<img src="assets/topic.png" style="width: 200px; background-color: white; border-radius: 10px;">
								<p>Decoupling <br/> Middleware</p>
							</div>
						</div>
					</div>
				</section>

				<!-----------------------------------------------------------------------------------------------------
				-- Q&A
				------------------------------------------------------------------------------------------------------->
				<section data-background-image="assets/q-n-a.jpg" data-background-color="#8693ab">
					<div style="display: flex; justify-content: flex-end; align-items: center; margin-top: 500px;">
						<p style="font-size: 18px; margin-right: 20px; color: white;">Presentation inspired by: <br/> Release It!</p>
						<a href="https://www.goodreads.com/book/show/1069827.Release_It_">
							<img src="assets/release-it-book.jpg" style="height: 110px;">
						</a>
					</div>
				</section>
			</div>
		</div>
		<script src="node_modules/reveal.js/dist/reveal.js"></script>
		<script src="node_modules/reveal.js/plugin/notes/notes.js"></script>
		<script src="node_modules/reveal.js/plugin/markdown/markdown.js"></script>
		<script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>
		<script src="node_modules/reveal.js/plugin/search/search.js"></script>
		<script src="node_modules/reveal.js/plugin/zoom/zoom.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealSearch, RevealZoom ]
			});
		</script>
	</body>
</html>
